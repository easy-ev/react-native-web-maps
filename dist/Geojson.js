Object.defineProperty(exports,"__esModule",{value:true});exports.makeOverlays=undefined;var _jsxFileName='src/Geojson.js';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _react=require('react');var _react2=_interopRequireDefault(_react);var _index=require('./index');var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var makeOverlays=exports.makeOverlays=function makeOverlays(features){var points=features.filter(function(f){return f.geometry&&(f.geometry.type==='Point'||f.geometry.type==='MultiPoint');}).map(function(feature){return makeCoordinates(feature).map(function(coordinates){return makeOverlay(coordinates,feature);});}).reduce(flatten,[]).map(function(overlay){return _extends({},overlay,{type:'point'});});var lines=features.filter(function(f){return f.geometry&&(f.geometry.type==='LineString'||f.geometry.type==='MultiLineString');}).map(function(feature){return makeCoordinates(feature).map(function(coordinates){return makeOverlay(coordinates,feature);});}).reduce(flatten,[]).map(function(overlay){return _extends({},overlay,{type:'polyline'});});var multipolygons=features.filter(function(f){return f.geometry&&f.geometry.type==='MultiPolygon';}).map(function(feature){return makeCoordinates(feature).map(function(coordinates){return makeOverlay(coordinates,feature);});}).reduce(flatten,[]);var polygons=features.filter(function(f){return f.geometry&&f.geometry.type==='Polygon';}).map(function(feature){return makeOverlay(makeCoordinates(feature),feature);}).reduce(flatten,[]).concat(multipolygons).map(function(overlay){return _extends({},overlay,{type:'polygon'});});return points.concat(lines).concat(polygons);};var flatten=function flatten(prev,curr){return prev.concat(curr);};var makeOverlay=function makeOverlay(coordinates,feature){var overlay={feature:feature};if(feature.geometry.type==='Polygon'||feature.geometry.type==='MultiPolygon'){overlay.coordinates=coordinates[0];if(coordinates.length>1){overlay.holes=coordinates.slice(1);}}else{overlay.coordinates=coordinates;}return overlay;};var makePoint=function makePoint(c){return{lat:c[1],lng:c[0]};};var makeLine=function makeLine(l){return l.map(makePoint);};var makeCoordinates=function makeCoordinates(feature){var g=feature.geometry;if(g.type==='Point'){return[makePoint(g.coordinates)];}else if(g.type==='MultiPoint'){return g.coordinates.map(makePoint);}else if(g.type==='LineString'){return[makeLine(g.coordinates)];}else if(g.type==='MultiLineString'){return g.coordinates.map(makeLine);}else if(g.type==='Polygon'){return g.coordinates.map(makeLine);}else if(g.type==='MultiPolygon'){return g.coordinates.map(function(p){return p.map(makeLine);});}else{return[];}};var Geojson=function Geojson(props){var overlays=makeOverlays(props.geojson.features);return _react2.default.createElement(_react2.default.Fragment,{__source:{fileName:_jsxFileName,lineNumber:77}},overlays.map(function(overlay,index){if(overlay.type==='point'){return _react2.default.createElement(_index2.default.Marker,{key:index,coordinate:overlay.coordinates,options:{pinColor:props.color},__source:{fileName:_jsxFileName,lineNumber:81}});}if(overlay.type==='polygon'){return _react2.default.createElement(_index2.default.Polygon,{key:index,coordinates:overlay.coordinates,holes:overlay.holes,options:{strokeColor:props.strokeColor,fillColor:props.fillColor,strokeWidth:props.strokeWidth},__source:{fileName:_jsxFileName,lineNumber:90}});}if(overlay.type==='polyline'){return _react2.default.createElement(_index2.default.Polyline,{key:index,path:overlay.coordinates,options:{strokeColor:props.strokeColor,strokeWidth:props.strokeWidth},__source:{fileName:_jsxFileName,lineNumber:104}});}}));};exports.default=Geojson;